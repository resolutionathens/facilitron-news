<!-- views/partials/get-started-form.ejs -->
<div class="modal fade f-modal" id="fGetStartedForm" tabindex="-1" role="dialog" aria-labelledby="fModalGetStarted" aria-hidden="true">
  <div class="modal-dialog cascading-modal" role="document">
    <div class="modal-content">

      <form action="/thanks" method="get">
        <div class="modal-body mb-1">
          <img src="/images/logos/facilitron-logo.svg" width="174px" height="40px" alt="Facilitron">
          <button class="modal-close" data-dismiss="modal" aria-hidden="true">
            x
          </button>
          <hr>

          <div>
            <h3 class="h4-responsive mb-4 text-dark">Create Account</h3>
          </div>

          <select name="signup_org_type" id="signup-org-type" class="form-control modal-field">
            <option value="">Select Organization Type</option>
            <option value="8">Commercial (business)</option>
            <option value="1">Individual (personal use)</option>
            <option value="2">Non-Profit (tax exempt)</option>
            <option value="99">New Partner</option>
            <option value="0">Existing Account Administrator</option>
          </select>

          <div id="form-descriptions">
            <h6 class="h5-responsive">Organization Types:</h6>
            <p><b>Commercial</b> &mdash; whateverâ€¦</p>
            <p><b>Individual</b> &mdash; I'm looking to rent facilities for myself.</p>
            <p><b>Non-profit</b> &mdash; EIN and verification required.</p>
            <p><b>New Partner</b> &mdash; I have facilities I would like to list.</p>
            <p><b>Administrator</b> &mdash; I need access to my organization's Facilitron account.</p>
          </div>

          <div id="form-individual" class="d-none">
            <input type="text" id="fiEmailAddress" placeholder="Email address">
            <input type="text" placeholder="First name">
            <input type="text" placeholder="Last name">
            <input type="password" placeholder="Password (at least 5 characters)">
            <input type="tel" placeholder="Phone">
            <div>
              <input type="checkbox" value="mobilePhone" id="fiMobilePhone">
              <label for="fiMobilePhone">Mobile Phone</label>
            </div>
          </div>

          <div id="form-commercial" class="d-none">
            <input type="text" id="fcEmailAddress" placeholder="Email address">
            <input type="text" placeholder="First name">
            <input type="text" placeholder="Last name">
            <input type="password" placeholder="Password (at least 5 characters)">
            <input type="tel" placeholder="Phone">
            <div>
              <input type="checkbox" value="mobilePhone" id="fcMobilePhone">
              <label for="fcMobilePhone">Mobile Phone</label>
            </div>
            <input type="text" placeholder="Organization name">
          </div>

          <div id="form-new-partner" class="d-none">
            <input type="text" id="partnerEmailAddress" placeholder="Email address">
            <input type="text" placeholder="First name">
            <input type="text" placeholder="Last name">
            <input type="text" placeholder="Organization name">
          </div>

          <div id="form-administrator" class="d-none">
            <input type="text" id="faEmailAddress" placeholder="Email address">
            <input type="text" placeholder="First name">
            <input type="text" placeholder="Last name">
            <input type="password" placeholder="Password (at least 5 characters)">
            <input type="tel" placeholder="Phone">
            <div>
              <input type="checkbox" value="mobilePhone" id="faMobilePhone">
              <label for="faMobilePhone">Mobile Phone</label>
            </div>
            <input type="text" placeholder="Organization name">
          </div>

          <div id="form-nonprofit" class="d-none">
            <input type="text" id="fnpEmailAddress" placeholder="Email address">
            <input type="text" placeholder="First name">
            <input type="text" placeholder="Last name">
            <input type="password" placeholder="Password (at least 5 characters)">
            <input type="tel" placeholder="Phone">
            <div>
              <input type="checkbox" value="fnpMobilePhone" id="mobilePhone">
              <label for="fnpMobilePhone">Mobile Phone</label>
            </div>
            <input type="text" placeholder="Organization name">
            <input type="text" placeholder="EIN number">
          </div>

          <div id="form-accept" class="d-none">
            <p class="small-text">By clicking "Create Account" I agree to Facilitron's <a href="/terms">Terms and Conditions</a> and <a href="/privacy">Privacy Policy</a>.</p>
            <div class="text-center mt-2">
              <button type="submit" class="btn btn-primary">Create Account ðŸš€</button>
            </div>
          </div>
          <hr>
          <p>Already have an account? <a href="#">Log In</a>.</p>
        </div>
      </form>

    </div>
  </div>
</div>
<!--/getStartedForm-->
<script>
  var orgSelect = document.querySelector('#signup-org-type');

  /** listens for changes to organization dropdown and displays correct form*/
  orgSelect.addEventListener('change', function(e){
    console.log('organization changed to ' + e.target.value);
    var formDescriptions = document.querySelector('#form-descriptions');
    var formIndividual = document.querySelector('#form-individual');
    var formNonprofit = document.querySelector('#form-nonprofit');
    var formCommercial = document.querySelector('#form-commercial');
    var formNewPartner = document.querySelector('#form-new-partner');
    var formAdministrator = document.querySelector('#form-administrator');
    var formAccept = document.querySelector('#form-accept');
    // hide all forms
    console.log('hiding all forms');
    hideElement(formDescriptions);
    hideElement(formCommercial);
    hideElement(formNonprofit);
    hideElement(formIndividual);
    hideElement(formNewPartner);
    hideElement(formAdministrator);
    // show formAccept
    formAccept.classList.remove('d-none');
    // values: commercial=8, individual=1, non-profit=2, administrator=0,
    switch(parseInt(e.target.value)){
      case 1:
        //show individual form
        formIndividual.classList.remove('d-none');
        break;
      case 2:
        // show non-profit form
        formNonprofit.classList.remove('d-none');
        break;
      case 8:
        //show commercial form
        formCommercial.classList.remove('d-none');
        break;
      case 99:
        //show new partner form
        formNewPartner.classList.remove('d-none');
        break;
      case 0:
        //show administrator form
        formAdministrator.classList.remove('d-none');
        break;
      default:
        //hide formAccept
        hideElement(formAccept);
        //show descriptions
        formDescriptions.classList.remove('d-none');
    }
  })

  /** hides an element by adding 'd-none' to the classList */
  function hideElement(el){
    if(el.classList.contains('d-none')){
      return;
    } else {
      el.classList.add('d-none');
    }
  }

  /** Toggles display of forms */
  function displayFields(){
    console.log('selection changed');
    if (registerOrganizationCheckbox.checked){
      //remove d-none from class
      registerOrganizationFields.classList.remove('d-none');
    } else {
      //add d-none to class
      registerOrganizationFields.classList.add('d-none');
    }
  }
</script>